<?xml version="1.0" encoding="utf-8"?>
<launch>
    <!-- Spawn position -->
    <arg name="x_pos" default="0.0" doc="Starting x coordinate of the robot in simulation" />
    <arg name="y_pos" default="0.0" doc="Starting y coordinate of the robot in simulation" />
    <arg name="z_pos" default="0.5" doc="Starting z coordinate of the robot in simulation" />
    <arg name="yaw_pos" default="0.0" doc="Starting yaw position of the robot in simulation" />

    <arg name="controller_spawner" default="true" />
    <arg name="cheater" default="false" />
    <arg name="legged_pub" default="true" />

    <arg name="robot_type" default="$(env ROBOT_TYPE)" />

    <!-- Rviz & Gazebo Config -->
    <arg name="gui" default="true" />
    <arg name="rviz" default="false" />
    <arg name="rviz_config" default="$(find legged_mapping)/rviz/legged_mapping.rviz" />
    <arg name="paused" default="false" />
    <arg name="world" default="worlds/empty.world" />

    <!-- Multi-realsense mapping -->
    <arg name="multi_realsense_enabled" default="false" />

    <!-- Robot Params -->
    <arg name="urdfFile" default="/tmp/legged_control/$(arg robot_type).urdf" />
    <arg name="taskFile" default="$(find legged_controllers)/config/$(arg robot_type)/task.info" />
    <arg name="referenceFile"
        default="$(find legged_controllers)/config/$(arg robot_type)/reference.info" />
    <arg name="gaitCommandFile"
        default="$(find legged_controllers)/config/$(arg robot_type)/gait.info" />

    <!-- Load robot -->
    <include file="$(find legged_unitree_description)/launch/load_world.launch">
        <arg name="gui" value="$(arg gui)" />
        <arg name="rviz" value="$(arg rviz)" />
        <arg name="robot_spawn"
            value="-x $(arg x_pos) -y $(arg y_pos) -z $(arg z_pos) -Y $(arg yaw_pos)" />
        <arg name="rviz_config" value="$(arg rviz_config)" />
        <arg name="robot_type" value="$(arg robot_type)" />
        <arg name="paused" value="$(arg paused)" />
    </include>

    <!-- Load controller -->
    <include file="$(find legged_controllers)/launch/load_controller.launch">
        <arg name="spawner" value="$(arg controller_spawner)" />
        <arg name="cheater" value="$(arg cheater)" />
        <arg name="urdfFile" value="$(arg urdfFile)" />
        <arg name="taskFile" value="$(arg taskFile)" />
        <arg name="referenceFile" value="$(arg referenceFile)" />
        <arg name="gaitCommandFile" value="$(arg gaitCommandFile)" />
        <arg name="legged_pub" value="$(arg legged_pub)" />
    </include>

    <!-- No need to publish tf due to leggedHWSim controller..? -->

    <include file="$(find legged_mapping)/launch/legged_mapping.launch">
        <arg name="robot_type" value="$(arg robot_type)" />
        <arg name="multi_realsense_enabled" value="$(arg multi_realsense_enabled)" />
    </include>
</launch>